{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      questions: [],\n      totalQuestions: 0,\n      loading: false,\n      headers: [{\n        text: '번호',\n        value: 'id'\n      }, {\n        text: '제목',\n        value: 'title'\n      }, {\n        text: '작성자',\n        value: 'questionUserName'\n      }, {\n        text: '작성 시간',\n        value: 'createdTime'\n      }, {\n        text: '답변',\n        value: 'answerText'\n      }, {\n        text: '관리',\n        value: 'actions',\n        sortable: false\n      }],\n      currentPage: 1,\n      totalPages: 1,\n      isAdmin: false\n    };\n  },\n  created() {\n    this.checkAdminRole();\n    this.fetchQuestions();\n  },\n  methods: {\n    checkAdminRole() {\n      const role = localStorage.getItem('role');\n      this.isAdmin = role === 'ADMIN';\n    },\n    async fetchQuestions() {\n      this.loading = true;\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/qna/list`, {\n          params: {\n            page: this.currentPage - 1,\n            size: 10\n          }\n        });\n        const data = response.data.data;\n        this.questions = data.content;\n        this.totalQuestions = data.totalElements;\n        this.totalPages = data.totalPages;\n      } catch (error) {\n        console.error('질문 목록을 불러오는 중 오류가 발생했습니다:', error);\n        alert('질문 목록을 불러오는 데 실패했습니다.');\n      } finally {\n        this.loading = false;\n      }\n    },\n    goToDetail(id) {\n      this.$router.push({\n        name: 'QnaDetail',\n        params: {\n          id\n        }\n      });\n    },\n    createNewQuestion() {\n      this.$router.push({\n        name: 'QnaCreate'\n      });\n    },\n    updateItem(id) {\n      this.$router.push({\n        name: 'QnaUpdate',\n        params: {\n          id\n        }\n      });\n    },\n    async deleteItem(id) {\n      try {\n        const confirmed = confirm('이 질문을 삭제하시겠습니까?');\n        if (confirmed) {\n          await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/qna/delete/${id}`);\n          alert('질문이 삭제되었습니다.');\n          this.fetchQuestions();\n        }\n      } catch (error) {\n        console.error('질문을 삭제하는 중 오류가 발생했습니다:', error);\n        alert('질문 삭제에 실패했습니다.');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","questions","totalQuestions","loading","headers","text","value","sortable","currentPage","totalPages","isAdmin","created","checkAdminRole","fetchQuestions","methods","role","localStorage","getItem","response","get","process","env","VUE_APP_API_BASE_URL","params","page","size","content","totalElements","error","console","alert","goToDetail","id","$router","push","name","createNewQuestion","updateItem","deleteItem","confirmed","confirm","delete"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/views/qna/QnaList.vue"],"sourcesContent":["<template>\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\">\n          <v-toolbar flat>\n            <v-toolbar-title>질문 목록</v-toolbar-title>\n            <v-divider class=\"mx-4\" inset vertical></v-divider>\n            <v-spacer></v-spacer>\n            <v-btn v-if=\"isAdmin\" @click=\"createNewQuestion\" class=\"create-button\">질문 작성</v-btn>\n            <v-btn @click=\"fetchQuestions\">새로고침</v-btn>\n          </v-toolbar>\n  \n          <v-data-table\n            :headers=\"headers\"\n            :items=\"questions\"\n            :loading=\"loading\"\n            :items-per-page=\"10\"\n            class=\"elevation-1\"\n          >\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn v-if=\"isAdmin\" @click=\"updateItem(item.id)\">수정</v-btn>\n              <v-btn v-if=\"isAdmin\" @click=\"deleteItem(item.id)\">삭제</v-btn>\n            </template>\n          </v-data-table>\n  \n          <v-pagination\n            v-model=\"currentPage\"\n            :length=\"totalPages\"\n            @input=\"fetchQuestions\"\n          ></v-pagination>\n        </v-col>\n      </v-row>\n    </v-container>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        questions: [],\n        totalQuestions: 0,\n        loading: false,\n        headers: [\n          { text: '번호', value: 'id' },\n          { text: '제목', value: 'title' },\n          { text: '작성자', value: 'questionUserName' },\n          { text: '작성 시간', value: 'createdTime' },\n          { text: '답변', value: 'answerText' },\n          { text: '관리', value: 'actions', sortable: false }\n        ],\n        currentPage: 1,\n        totalPages: 1,\n        isAdmin: false,\n      };\n    },\n    created() {\n      this.checkAdminRole();\n      this.fetchQuestions();\n    },\n    methods: {\n      checkAdminRole() {\n        const role = localStorage.getItem('role');\n        this.isAdmin = role === 'ADMIN';\n      },\n      async fetchQuestions() {\n        this.loading = true;\n        try {\n          const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/qna/list`, {\n            params: {\n              page: this.currentPage - 1,\n              size: 10,\n            }\n          });\n          const data = response.data.data;\n          this.questions = data.content;\n          this.totalQuestions = data.totalElements;\n          this.totalPages = data.totalPages;\n        } catch (error) {\n          console.error('질문 목록을 불러오는 중 오류가 발생했습니다:', error);\n          alert('질문 목록을 불러오는 데 실패했습니다.');\n        } finally {\n          this.loading = false;\n        }\n      },\n      goToDetail(id) {\n        this.$router.push({ name: 'QnaDetail', params: { id } });\n      },\n      createNewQuestion() {\n        this.$router.push({ name: 'QnaCreate' });\n      },\n      updateItem(id) {\n        this.$router.push({ name: 'QnaUpdate', params: { id } });\n      },\n      async deleteItem(id) {\n        try {\n          const confirmed = confirm('이 질문을 삭제하시겠습니까?');\n          if (confirmed) {\n            await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/qna/delete/${id}`);\n            alert('질문이 삭제되었습니다.');\n            this.fetchQuestions();\n          }\n        } catch (error) {\n          console.error('질문을 삭제하는 중 오류가 발생했습니다:', error);\n          alert('질문 삭제에 실패했습니다.');\n        }\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .v-container {\n    max-width: 1200px;\n    margin: 0 auto;\n    padding-top: 50px;\n  }\n  \n  .create-button {\n    background-color: #007bff;\n    color: white;\n    margin-right: 10px;\n  }\n  .create-button:hover {\n    background-color: #0056b3;\n  }\n  </style>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}