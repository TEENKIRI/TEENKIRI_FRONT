{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  props: {\n    modelValue: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      internalValue: this.modelValue,\n      subjectId: \"\",\n      subjectData: {},\n      isInWishlist: false,\n      isEnrolled: false // 사용자의 수강 여부 상태\n    };\n  },\n  created() {\n    this.subjectId = this.$route.params.id;\n    this.getSubjectDetail();\n    this.checkWishlistStatus();\n    this.checkEnrollmentStatus(); // 수강 여부 확인\n  },\n  methods: {\n    async getSubjectDetail() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/subject/detail/${this.subjectId}`);\n        this.subjectData = response.data.result;\n      } catch (error) {\n        console.error('강좌 세부 정보 조회 실패:', error);\n      }\n    },\n    async checkWishlistStatus() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/wish/check/${this.subjectId}`);\n        this.isInWishlist = response.data.isInWishlist;\n      } catch (error) {\n        console.error('위시리스트 상태 확인 실패:', error);\n      }\n    },\n    async checkEnrollmentStatus() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/my/subject/check-enrollment/${this.subjectId}`);\n        this.isEnrolled = response.data.isEnrolled; // 사용자가 수강중인지 확인\n      } catch (error) {\n        console.error('수강 상태 확인 실패:', error);\n      }\n    },\n    async handleWishlist() {\n      if (this.isInWishlist) {\n        await this.removeFromWishlist();\n      } else {\n        await this.addToWishlist();\n      }\n      this.isInWishlist = !this.isInWishlist;\n    },\n    async addToWishlist() {\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert('찜 추가 성공');\n      } catch (error) {\n        alert('찜 추가 실패');\n        console.error(error);\n      }\n    },\n    async removeFromWishlist() {\n      try {\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert('찜 취소 성공');\n      } catch (error) {\n        alert('찜 취소 실패');\n        console.error(error);\n      }\n    },\n    async applyForSubject() {\n      if (this.isEnrolled) {\n        alert('이미 수강중인 강좌입니다.');\n        return;\n      }\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/my/subject/create`, {\n          subjectId: this.subjectId\n        });\n        alert('강좌 수강 신청이 완료되었습니다.');\n        this.isEnrolled = true; // 신청 후 수강 상태 업데이트\n      } catch (error) {\n        alert('강좌 수강 신청 실패');\n        console.error(error);\n      }\n    },\n    goToPage(pathName) {\n      this.$router.push({\n        name: pathName,\n        params: {\n          id: this.subjectId\n        }\n      });\n    }\n  },\n  computed: {\n    menuItems() {\n      return [{\n        title: \"강의목록\",\n        value: \"SubjectDetail\"\n      }, {\n        title: \"Q&A 게시판\",\n        value: \"SubjectQna\"\n      }, {\n        title: \"강의 후기\",\n        value: \"SubjectReview\"\n      }];\n    }\n  }\n};","map":{"version":3,"names":["axios","props","modelValue","type","String","required","data","internalValue","subjectId","subjectData","isInWishlist","isEnrolled","created","$route","params","id","getSubjectDetail","checkWishlistStatus","checkEnrollmentStatus","methods","response","get","process","env","VUE_APP_API_BASE_URL","result","error","console","handleWishlist","removeFromWishlist","addToWishlist","post","alert","delete","applyForSubject","goToPage","pathName","$router","push","name","computed","menuItems","title","value"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/components/subject/SubjectDetailComponent.vue"],"sourcesContent":["<template>\n  <v-sheet>\n    <v-row>\n      <v-col>\n        <h1>{{ subjectData.title }}</h1>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <img v-bind:src=\"subjectData.subjectThumUrl\" />\n      </v-col>\n      <v-col>\n        <v-row>\n          <v-col>\n            <!-- 수강중인 경우 버튼 비활성화 -->\n            <v-btn :disabled=\"isEnrolled\" @click=\"applyForSubject\">\n              {{ isEnrolled ? '이미 수강중입니다' : '수강신청' }}\n            </v-btn>\n            <v-btn @click=\"handleWishlist\">\n              {{ isInWishlist ? '찜 취소하기' : '찜하기' }}\n            </v-btn>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col>\n            <v-list lines=\"two\">\n              <v-list-item title=\"선생님\" :subtitle=\"subjectData.userTeacherName\"></v-list-item>\n              <v-list-item title=\"수강대상\" :subtitle=\"subjectData.grade\"></v-list-item>\n              <v-list-item title=\"강좌구성\" :subtitle=\"subjectData.userTeacherName\"></v-list-item>\n              <v-list-item title=\"평점\" :subtitle=\"subjectData.rating + ' 점'\"></v-list-item>\n              <v-list-item title=\"설명\" :subtitle=\"subjectData.description\"></v-list-item>\n            </v-list>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <v-btn-toggle v-model=\"internalValue\" color=\"primary\" rounded=\"0\" group>\n          <v-btn class=\"flex-grow-1\" v-for=\"item in menuItems\" :key=\"item.value\" :value=\"item.value\" @click=\"goToPage(item.value)\">\n            {{ item.title }}\n          </v-btn>\n        </v-btn-toggle>\n      </v-col>\n    </v-row>\n  </v-sheet>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  props: {\n    modelValue: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      internalValue: this.modelValue,\n      subjectId: \"\",\n      subjectData: {},\n      isInWishlist: false,\n      isEnrolled: false // 사용자의 수강 여부 상태\n    };\n  },\n  created() {\n    this.subjectId = this.$route.params.id;\n    this.getSubjectDetail();\n    this.checkWishlistStatus();\n    this.checkEnrollmentStatus(); // 수강 여부 확인\n  },\n  methods: {\n    async getSubjectDetail() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/subject/detail/${this.subjectId}`\n        );\n        this.subjectData = response.data.result;\n      } catch (error) {\n        console.error('강좌 세부 정보 조회 실패:', error);\n      }\n    },\n    async checkWishlistStatus() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/wish/check/${this.subjectId}`\n        );\n        this.isInWishlist = response.data.isInWishlist;\n      } catch (error) {\n        console.error('위시리스트 상태 확인 실패:', error);\n      }\n    },\n    async checkEnrollmentStatus() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/my/subject/check-enrollment/${this.subjectId}`\n        );\n        this.isEnrolled = response.data.isEnrolled; // 사용자가 수강중인지 확인\n      } catch (error) {\n        console.error('수강 상태 확인 실패:', error);\n      }\n    },\n    async handleWishlist() {\n      if (this.isInWishlist) {\n        await this.removeFromWishlist();\n      } else {\n        await this.addToWishlist();\n      }\n      this.isInWishlist = !this.isInWishlist;\n    },\n    async addToWishlist() {\n      try {\n        await axios.post(\n          `${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`\n        );\n        alert('찜 추가 성공');\n      } catch (error) {\n        alert('찜 추가 실패');\n        console.error(error);\n      }\n    },\n    async removeFromWishlist() {\n      try {\n        await axios.delete(\n          `${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`\n        );\n        alert('찜 취소 성공');\n      } catch (error) {\n        alert('찜 취소 실패');\n        console.error(error);\n      }\n    },\n    async applyForSubject() {\n      if (this.isEnrolled) {\n        alert('이미 수강중인 강좌입니다.');\n        return;\n      }\n      try {\n        await axios.post(\n          `${process.env.VUE_APP_API_BASE_URL}/my/subject/create`,\n          {\n            subjectId: this.subjectId\n          }\n        );\n        alert('강좌 수강 신청이 완료되었습니다.');\n        this.isEnrolled = true; // 신청 후 수강 상태 업데이트\n      } catch (error) {\n        alert('강좌 수강 신청 실패');\n        console.error(error);\n      }\n    },\n    goToPage(pathName) {\n      this.$router.push({ name: pathName, params: { id: this.subjectId } });\n    }\n  },\n  computed: {\n    menuItems() {\n      return [\n        { title: \"강의목록\", value: \"SubjectDetail\" },\n        { title: \"Q&A 게시판\", value: \"SubjectQna\" },\n        { title: \"강의 후기\", value: \"SubjectReview\" }\n      ];\n    }\n  }\n};\n</script>\n\n<style>\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}