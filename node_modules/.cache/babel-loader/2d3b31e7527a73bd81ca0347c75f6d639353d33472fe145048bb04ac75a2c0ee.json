{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      confirmationText: '',\n      valid: false,\n      confirmationRules: [v => v === '틴끼리 사이트 회원 탈퇴에 동의합니다' || '회원 탈퇴 문구가 올바르지 않습니다.']\n    };\n  },\n  methods: {\n    async deleteAccount() {\n      try {\n        const response = await axios.post(`${process.env.VUE_APP_API_BASE_URL}/user/delete-account`, {\n          confirmation: this.confirmationText\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.status === 200) {\n          alert('회원 탈퇴가 완료되었습니다.');\n          localStorage.removeItem('token');\n          localStorage.removeItem('refreshToken');\n          localStorage.removeItem('userId');\n          localStorage.removeItem('email');\n          localStorage.removeItem('role');\n          this.$router.push('/login');\n        } else {\n          alert('회원 탈퇴에 실패했습니다. 다시 시도해주세요.');\n        }\n      } catch (error) {\n        if (error.response && error.response.data && error.response.data.message) {\n          alert(`오류: ${error.response.data.message}`);\n        } else {\n          alert('회원 탈퇴 중 오류가 발생했습니다.');\n        }\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","confirmationText","valid","confirmationRules","v","methods","deleteAccount","response","post","process","env","VUE_APP_API_BASE_URL","confirmation","headers","Authorization","localStorage","getItem","status","alert","removeItem","$router","push","error","message","console"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/views/user/DeleteAccount.vue"],"sourcesContent":["<template>\n    <v-container>\n      <v-card class=\"mx-auto\" max-width=\"400\">\n        <v-card-title>\n          <span class=\"headline\">회원 탈퇴</span>\n        </v-card-title>\n        <v-card-text>\n          <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n            <v-text-field\n              v-model=\"confirmationText\"\n              label=\"회원 탈퇴 문구를 입력하세요\"\n              :rules=\"confirmationRules\"\n              required\n            ></v-text-field>\n            <small>회원 탈퇴 문구: \"틴끼리 사이트 회원 탈퇴에 동의합니다\"</small>\n          </v-form>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"red\" @click=\"deleteAccount\" :disabled=\"!valid\">탈퇴</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-container>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        confirmationText: '',\n        valid: false,\n        confirmationRules: [\n          v => v === '틴끼리 사이트 회원 탈퇴에 동의합니다' || '회원 탈퇴 문구가 올바르지 않습니다.',\n        ],\n      };\n    },\n    methods: {\n  async deleteAccount() {\n    try {\n      const response = await axios.post(\n        `${process.env.VUE_APP_API_BASE_URL}/user/delete-account`,\n        { confirmation: this.confirmationText },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        }\n      );\n\n      if (response.status === 200) {\n        alert('회원 탈퇴가 완료되었습니다.');\n\n        localStorage.removeItem('token');\n        localStorage.removeItem('refreshToken');\n        localStorage.removeItem('userId');\n        localStorage.removeItem('email');\n        localStorage.removeItem('role');\n\n        this.$router.push('/login');\n      } else {\n        alert('회원 탈퇴에 실패했습니다. 다시 시도해주세요.');\n      }\n    } catch (error) {\n      if (error.response && error.response.data && error.response.data.message) {\n        alert(`오류: ${error.response.data.message}`);\n      } else {\n        alert('회원 탈퇴 중 오류가 발생했습니다.');\n      }\n      console.error(error);\n    }\n  },\n},\n  }\n\n  </script>\n  \n  <style scoped>\n  .mx-auto {\n    margin-top: 20px;\n  }\n  </style>\n  "],"mappings":";AA0BE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,gBAAgB,EAAE,EAAE;MACpBC,KAAK,EAAE,KAAK;MACZC,iBAAiB,EAAE,CACjBC,CAAA,IAAKA,CAAA,KAAM,sBAAqB,IAAK,sBAAsB;IAE/D,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACX,MAAMC,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMR,KAAK,CAACS,IAAI,CAC/B,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,sBAAsB,EACzD;UAAEC,YAAY,EAAE,IAAI,CAACX;QAAiB,CAAC,EACvC;UACEY,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UACxD;QACF,CACF,CAAC;QAED,IAAIT,QAAQ,CAACU,MAAK,KAAM,GAAG,EAAE;UAC3BC,KAAK,CAAC,iBAAiB,CAAC;UAExBH,YAAY,CAACI,UAAU,CAAC,OAAO,CAAC;UAChCJ,YAAY,CAACI,UAAU,CAAC,cAAc,CAAC;UACvCJ,YAAY,CAACI,UAAU,CAAC,QAAQ,CAAC;UACjCJ,YAAY,CAACI,UAAU,CAAC,OAAO,CAAC;UAChCJ,YAAY,CAACI,UAAU,CAAC,MAAM,CAAC;UAE/B,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;QAC7B,OAAO;UACLH,KAAK,CAAC,2BAA2B,CAAC;QACpC;MACF,EAAE,OAAOI,KAAK,EAAE;QACd,IAAIA,KAAK,CAACf,QAAO,IAAKe,KAAK,CAACf,QAAQ,CAACP,IAAG,IAAKsB,KAAK,CAACf,QAAQ,CAACP,IAAI,CAACuB,OAAO,EAAE;UACxEL,KAAK,CAAC,OAAOI,KAAK,CAACf,QAAQ,CAACP,IAAI,CAACuB,OAAO,EAAE,CAAC;QAC7C,OAAO;UACLL,KAAK,CAAC,qBAAqB,CAAC;QAC9B;QACAM,OAAO,CAACF,KAAK,CAACA,KAAK,CAAC;MACtB;IACF;EACF;AACE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}