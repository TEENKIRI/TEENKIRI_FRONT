{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mt-5\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-center mt-5\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_video_player = _resolveComponent(\"video-player\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  return _openBlock(), _createBlock(_component_v_container, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"h1\", null, _toDisplayString($data.lectureData.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" videoOptions.sources가 설정되었을 때만 VideoPlayer를 렌더링 \"), $data.videoOptions.sources[0].src ? (_openBlock(), _createBlock(_component_video_player, {\n      key: 0,\n      options: $data.videoOptions\n    }, null, 8 /* PROPS */, [\"options\"])) : _createCommentVNode(\"v-if\", true)])])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_v_container","default","_withCtx","_createElementVNode","_hoisted_1","_toDisplayString","$data","lectureData","title","_hoisted_2","_createCommentVNode","videoOptions","sources","src","_component_video_player","key","options","_"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/views/lecture/LectureDetail.vue"],"sourcesContent":["<template>\n  <v-container>\n    <div class=\"mt-5\">\n      <h1>{{ lectureData.title }}</h1>\n      <div class=\"d-flex justify-center mt-5\">\n        <!-- videoOptions.sources가 설정되었을 때만 VideoPlayer를 렌더링 -->\n        <video-player v-if=\"videoOptions.sources[0].src\" :options=\"videoOptions\" />\n      </div>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport VideoPlayer from '@/components/Lecture/videoPlayer.vue';\nimport axios from 'axios';\n\nexport default {\n  name: 'VideoExample',\n  components: {\n    VideoPlayer\n  },\n  data() {\n    return {\n      user: {\n        token: \"\",\n        id: \"\",\n        email: \"\"\n      },\n      lectureId: \"\",\n      lectureData: {},\n      videoOptions: {\n        autoplay: true,\n        controls: true,\n        sources: [\n          {\n            src: \"\",\n            type: 'video/mp4'\n          }\n        ]\n      }\n    };\n  },\n  async created() {\n    try {\n      await this.$store.dispatch('setUserAllInfoActions');\n      this.user = this.$store.getters.getUserObj;\n\n      if (this.user.token === \"\") {\n        alert('로그인이 필요합니다.');\n        location.href = -1;\n      }\n\n      this.lectureId = this.$route.params.id;\n\n      // 강의 세부 정보를 가져옵니다.\n      await this.getLectureDetail();\n\n      // 강의 세부 정보에서 비디오 URL을 설정하고 VideoPlayer 컴포넌트를 렌더링합니다.\n      this.setLectureDetail();\n    } catch (error) {\n      console.error(\"An error occurred while fetching user info:\", error);\n    }\n  },\n  methods: {\n    async getLectureDetail() {\n      console.log(\"lecture detail 실행!\", this.lectureId)\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/user/lecture/detail/${this.lectureId}`\n        );\n        const additionalData = response.data.result;\n        console.log(response);\n        this.lectureData = additionalData;\n\n        // lectureData에서 videoUrl을 가져와 videoOptions를 업데이트합니다.\n        console.log(this.videoOptions)\n        this.videoOptions.sources[0].src = this.lectureData.videoUrl;\n        console.log(this.videoOptions)\n      } catch (e) {\n        if(e.response.data.status_code === 404){\n          alert(\"수강신청이 되지 않았습니다.\");\n          history.go(-1);\n        }else{\n          console.error(e)\n        }\n      }\n    },\n    setLectureDetail() {\n      // videoOptions가 업데이트된 후 loadVideo를 true로 설정하여 VideoPlayer를 렌더링합니다.\n      this.loadVideo = true;\n    }\n  }\n};\n</script>"],"mappings":";;EAESA,KAAK,EAAC;AAAM;;EAEVA,KAAK,EAAC;AAA4B;;;;uBAH3CC,YAAA,CAQcC,sBAAA;IAThBC,OAAA,EAAAC,QAAA,CAEI,MAMM,CANNC,mBAAA,CAMM,OANNC,UAMM,GALJD,mBAAA,CAAgC,YAAAE,gBAAA,CAAzBC,KAAA,CAAAC,WAAW,CAACC,KAAK,kBACxBL,mBAAA,CAGM,OAHNM,UAGM,GAFJC,mBAAA,qDAAwD,EACpCJ,KAAA,CAAAK,YAAY,CAACC,OAAO,IAAIC,GAAG,I,cAA/Cd,YAAA,CAA2Ee,uBAAA;MANnFC,GAAA;MAM0DC,OAAO,EAAEV,KAAA,CAAAK;4CANnED,mBAAA,e;IAAAO,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}