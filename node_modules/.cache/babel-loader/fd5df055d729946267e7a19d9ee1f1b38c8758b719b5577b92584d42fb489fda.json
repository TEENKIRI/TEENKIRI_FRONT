{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  props: {\n    modelValue: {\n      type: String,\n      required: true\n    }\n  },\n  inject: ['getSubjectData'],\n  mounted() {},\n  data() {\n    return {\n      internalValue: this.modelValue,\n      subjectId: \"\",\n      subjectData: null\n    };\n  },\n  created() {\n    this.subjectId = this.$route.params.id;\n    this.getSubjectDetail();\n  },\n  mounted() {},\n  methods: {\n    async getSubjectDetail() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/subject/detail/${this.subjectId}`);\n        this.subjectData = response.data.result;\n        console.log(this.subjectData);\n\n        // 데이터가 로드된 후 상위 컴포넌트에 알림\n        this.$emit('subject-data-loaded', this.subjectData);\n      } catch (error) {\n        console.error(\"강좌 세부 정보 조회 실패:\", error);\n      }\n    },\n    async checkWishlistStatus() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/wish/check/${this.subjectId}`);\n        this.subjectData.isSubscribe = response.data.isInWishlist;\n      } catch (error) {\n        console.error(\"위시리스트 상태 확인 실패:\", error);\n      }\n    },\n    async checkEnrollmentStatus() {\n      try {\n        const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/my/subject/check-enrollment/${this.subjectId}`);\n        this.subjectData.isRegistered = response.data.isEnrolled; // 사용자가 수강중인지 확인\n      } catch (error) {\n        console.error(\"수강 상태 확인 실패:\", error);\n      }\n    },\n    async handleWishlist() {\n      if (this.subjectData.isSubscribe) {\n        await this.removeFromWishlist();\n      } else {\n        await this.addToWishlist();\n      }\n      // this.isInWishlist = !this.isInWishlist;\n    },\n    async addToWishlist() {\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert(\"찜 추가 성공\");\n        this.subjectData.isSubscribe = true;\n      } catch (error) {\n        alert(\"찜 추가 실패\");\n        console.error(error);\n      }\n    },\n    async removeFromWishlist() {\n      try {\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert(\"찜 취소 성공\");\n        this.subjectData.isSubscribe = false;\n      } catch (error) {\n        alert(\"찜 취소 실패\");\n        console.error(error);\n      }\n    },\n    async applyForSubject() {\n      if (this.subjectData.isRegistered) {\n        alert(\"이미 수강중인 강좌입니다.\");\n        return;\n      }\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/my/subject/create`, {\n          subjectId: this.subjectId\n        });\n        alert(\"강좌 수강 신청이 완료되었습니다.\");\n        this.subjectData.isRegistered = true; // 신청 후 수강 상태 업데이트\n      } catch (error) {\n        alert(\"강좌 수강 신청 실패\");\n        console.error(error);\n      }\n    },\n    goToPage(pathName) {\n      this.$router.push({\n        name: pathName,\n        params: {\n          id: this.subjectId\n        }\n      });\n    }\n  },\n  computed: {\n    menuItems() {\n      return [{\n        title: \"강의목록\",\n        value: \"SubjectDetail\"\n      }, {\n        title: \"Q&A 게시판\",\n        value: \"SubjectQna\"\n      }, {\n        title: \"강의 후기\",\n        value: \"SubjectReview\"\n      }];\n    }\n  }\n};","map":{"version":3,"names":["axios","props","modelValue","type","String","required","inject","mounted","data","internalValue","subjectId","subjectData","created","$route","params","id","getSubjectDetail","methods","response","get","process","env","VUE_APP_API_BASE_URL","result","console","log","$emit","error","checkWishlistStatus","isSubscribe","isInWishlist","checkEnrollmentStatus","isRegistered","isEnrolled","handleWishlist","removeFromWishlist","addToWishlist","post","alert","delete","applyForSubject","goToPage","pathName","$router","push","name","computed","menuItems","title","value"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/components/subject/SubjectDetailComponent.vue"],"sourcesContent":["<template>\n  <v-sheet v-if=\"subjectData\">\n    <v-row>\n      <v-col>\n        <h1>{{ subjectData.title }}</h1>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <img v-bind:src=\"subjectData.subjectThumUrl\" />\n      </v-col>\n      <v-col>\n        <v-row>\n          <v-col>\n            <!-- 수강중인 경우 버튼 비활성화 -->\n            <v-btn :disabled=\"this.subjectData.isRegistered\" @click=\"applyForSubject\">\n              {{ this.subjectData.isRegistered ? \"이미 수강중입니다\" : \"수강신청\" }}\n            </v-btn>\n            <v-btn @click=\"handleWishlist\">\n              {{ this.subjectData.isSubscribe ? \"찜 취소하기\" : \"찜하기\" }}\n            </v-btn>\n          </v-col>\n        </v-row>\n        <v-row>\n          <v-col>\n            <v-list lines=\"two\">\n              <v-list-item\n                title=\"선생님\"\n                :subtitle=\"subjectData.userTeacherName\"\n              ></v-list-item>\n              <v-list-item title=\"수강대상\" :subtitle=\"subjectData.grade\"></v-list-item>\n              <v-list-item\n                title=\"강좌구성\"\n                :subtitle=\"subjectData.userTeacherName\"\n              ></v-list-item>\n              <v-list-item\n                title=\"평점\"\n                :subtitle=\"subjectData.rating + ' 점'\"\n              ></v-list-item>\n              <v-list-item title=\"설명\" :subtitle=\"subjectData.description\"></v-list-item>\n            </v-list>\n          </v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col>\n        <v-btn-toggle v-model=\"internalValue\" color=\"primary\" rounded=\"0\" group>\n          <v-btn\n            class=\"flex-grow-1\"\n            v-for=\"item in menuItems\"\n            :key=\"item.value\"\n            :value=\"item.value\"\n            @click=\"goToPage(item.value)\"\n          >\n            {{ item.title }}\n          </v-btn>\n        </v-btn-toggle>\n      </v-col>\n    </v-row>\n  </v-sheet>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  props: {\n    modelValue: {\n      type: String,\n      required: true,\n    },\n  },\n  inject: ['getSubjectData'],\n  mounted() {\n    \n  },\n  data() {\n    return {\n      internalValue: this.modelValue,\n      subjectId: \"\",\n      subjectData: null,\n    };\n  },\n  created() {\n    this.subjectId = this.$route.params.id;\n    this.getSubjectDetail();\n  },\n  mounted() {\n  },\n  methods: {\n    async getSubjectDetail() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/subject/detail/${this.subjectId}`\n        );\n        this.subjectData = response.data.result;\n        console.log(this.subjectData);\n\n        // 데이터가 로드된 후 상위 컴포넌트에 알림\n        this.$emit('subject-data-loaded', this.subjectData);\n\n      } catch (error) {\n        console.error(\"강좌 세부 정보 조회 실패:\", error);\n      }\n    },\n    async checkWishlistStatus() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/wish/check/${this.subjectId}`\n        );\n        this.subjectData.isSubscribe = response.data.isInWishlist;\n      } catch (error) {\n        console.error(\"위시리스트 상태 확인 실패:\", error);\n      }\n    },\n    async checkEnrollmentStatus() {\n      try {\n        const response = await axios.get(\n          `${process.env.VUE_APP_API_BASE_URL}/my/subject/check-enrollment/${this.subjectId}`\n        );\n        this.subjectData.isRegistered = response.data.isEnrolled; // 사용자가 수강중인지 확인\n      } catch (error) {\n        console.error(\"수강 상태 확인 실패:\", error);\n      }\n    },\n    async handleWishlist() {\n      if (this.subjectData.isSubscribe) {\n        await this.removeFromWishlist();\n      } else {\n        await this.addToWishlist();\n      }\n      // this.isInWishlist = !this.isInWishlist;\n    },\n    async addToWishlist() {\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert(\"찜 추가 성공\");\n        this.subjectData.isSubscribe = true;\n      } catch (error) {\n        alert(\"찜 추가 실패\");\n        console.error(error);\n      }\n    },\n    async removeFromWishlist() {\n      try {\n        await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/wish/${this.subjectId}`);\n        alert(\"찜 취소 성공\");\n        this.subjectData.isSubscribe = false;\n      } catch (error) {\n        alert(\"찜 취소 실패\");\n        console.error(error);\n      }\n    },\n    async applyForSubject() {\n      if (this.subjectData.isRegistered) {\n        alert(\"이미 수강중인 강좌입니다.\");\n        return;\n      }\n      try {\n        await axios.post(`${process.env.VUE_APP_API_BASE_URL}/my/subject/create`, {\n          subjectId: this.subjectId,\n        });\n        alert(\"강좌 수강 신청이 완료되었습니다.\");\n        this.subjectData.isRegistered = true; // 신청 후 수강 상태 업데이트\n      } catch (error) {\n        alert(\"강좌 수강 신청 실패\");\n        console.error(error);\n      }\n    },\n    goToPage(pathName) {\n      this.$router.push({ name: pathName, params: { id: this.subjectId } });\n    },\n  },\n  computed: {\n    menuItems() {\n      return [\n        { title: \"강의목록\", value: \"SubjectDetail\" },\n        { title: \"Q&A 게시판\", value: \"SubjectQna\" },\n        { title: \"강의 후기\", value: \"SubjectReview\" },\n      ];\n    },\n  },\n};\n</script>\n\n<style></style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}