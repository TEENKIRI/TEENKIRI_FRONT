{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-60738bad\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\");\n  const _component_v_divider = _resolveComponent(\"v-divider\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\");\n  const _component_v_data_table = _resolveComponent(\"v-data-table\");\n  const _component_v_pagination = _resolveComponent(\"v-pagination\");\n  const _component_v_col = _resolveComponent(\"v-col\");\n  const _component_v_row = _resolveComponent(\"v-row\");\n  const _component_v_container = _resolveComponent(\"v-container\");\n  return _openBlock(), _createBlock(_component_v_container, null, {\n    default: _withCtx(() => [_createVNode(_component_v_row, null, {\n      default: _withCtx(() => [_createVNode(_component_v_col, {\n        cols: \"12\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_v_data_table, {\n          headers: $data.headers,\n          items: $data.questions,\n          loading: $data.loading,\n          \"server-items-length\": $data.totalQuestions,\n          options: $data.options,\n          \"onUpdate:options\": _cache[0] || (_cache[0] = $event => $data.options = $event),\n          \"items-per-page\": $data.options.itemsPerPage,\n          class: \"elevation-1\"\n        }, {\n          top: _withCtx(() => [_createVNode(_component_v_toolbar, {\n            flat: \"\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_v_toolbar_title, null, {\n              default: _withCtx(() => [_createTextVNode(\"질문 목록\")]),\n              _: 1 /* STABLE */\n            }), _createVNode(_component_v_divider, {\n              class: \"mx-4\",\n              inset: \"\",\n              vertical: \"\"\n            }), _createVNode(_component_v_spacer), $data.isAdmin ? (_openBlock(), _createBlock(_component_v_btn, {\n              key: 0,\n              onClick: $options.createNewQuestion,\n              class: \"create-button\"\n            }, {\n              default: _withCtx(() => [_createTextVNode(\"질문 작성\")]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_v_btn, {\n              onClick: $options.fetchQuestions\n            }, {\n              default: _withCtx(() => [_createTextVNode(\"새로고침\")]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"onClick\"])]),\n            _: 1 /* STABLE */\n          })]),\n          \"item.answerText\": _withCtx(({\n            item\n          }) => [item.answerText ? (_openBlock(), _createElementBlock(\"span\", _hoisted_1, _toDisplayString(item.answerText), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"답변 없음\"))]),\n          \"item.createdTime\": _withCtx(({\n            item\n          }) => [_createTextVNode(_toDisplayString($options.formatDate(item.createdTime)), 1 /* TEXT */)]),\n          \"item.title\": _withCtx(({\n            item\n          }) => [_createElementVNode(\"span\", {\n            onClick: $event => $options.goToDetail(item.id),\n            class: \"clickable\"\n          }, _toDisplayString(item.title), 9 /* TEXT, PROPS */, _hoisted_3)]),\n          \"item.actions\": _withCtx(({\n            item\n          }) => [$data.isAdmin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 0,\n            onClick: $event => $options.updateItem(item.id)\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"수정\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true), $data.isAdmin ? (_openBlock(), _createBlock(_component_v_btn, {\n            key: 1,\n            onClick: $event => $options.deleteItem(item.id)\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"삭제\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])) : _createCommentVNode(\"v-if\", true)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"headers\", \"items\", \"loading\", \"server-items-length\", \"options\", \"items-per-page\"]), _createVNode(_component_v_pagination, {\n          modelValue: $data.currentPage,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.currentPage = $event),\n          length: $data.totalPages,\n          onInput: $options.fetchQuestions\n        }, null, 8 /* PROPS */, [\"modelValue\", \"length\", \"onInput\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["key","_createBlock","_component_v_container","default","_withCtx","_createVNode","_component_v_row","_component_v_col","cols","_component_v_data_table","headers","$data","items","questions","loading","totalQuestions","options","_cache","$event","itemsPerPage","class","top","_component_v_toolbar","flat","_component_v_toolbar_title","_createTextVNode","_","_component_v_divider","inset","vertical","_component_v_spacer","isAdmin","_component_v_btn","onClick","$options","createNewQuestion","_createCommentVNode","fetchQuestions","item","answerText","_createElementBlock","_hoisted_1","_toDisplayString","_hoisted_2","formatDate","createdTime","_createElementVNode","goToDetail","id","title","_hoisted_3","updateItem","deleteItem","_component_v_pagination","modelValue","currentPage","length","totalPages","onInput"],"sources":["/Users/milcho/Project/TEENKIRI/teenkiri_front/teenkiri_front/src/views/qna/QnaList.vue"],"sourcesContent":["<template>\n    <v-container>\n      <v-row>\n        <v-col cols=\"12\">\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"questions\"\n            :loading=\"loading\"\n            :server-items-length=\"totalQuestions\"\n            v-model:options=\"options\"\n            :items-per-page=\"options.itemsPerPage\"\n            class=\"elevation-1\"\n          >\n            <template v-slot:top>\n              <v-toolbar flat>\n                <v-toolbar-title>질문 목록</v-toolbar-title>\n                <v-divider class=\"mx-4\" inset vertical></v-divider>\n                <v-spacer></v-spacer>\n                <v-btn v-if=\"isAdmin\" @click=\"createNewQuestion\" class=\"create-button\">질문 작성</v-btn>\n                <v-btn @click=\"fetchQuestions\">새로고침</v-btn>\n              </v-toolbar>\n            </template>\n            <template #item.answerText=\"{ item }\">\n              <span v-if=\"item.answerText\">{{ item.answerText }}</span>\n              <span v-else>답변 없음</span>\n            </template>\n            <template #item.createdTime=\"{ item }\">\n              {{ formatDate(item.createdTime) }}\n            </template>\n            <template #item.title=\"{ item }\">\n              <span @click=\"goToDetail(item.id)\" class=\"clickable\">{{ item.title }}</span>\n            </template>\n            <template #item.actions=\"{ item }\">\n              <v-btn v-if=\"isAdmin\" @click=\"updateItem(item.id)\">수정</v-btn>\n              <v-btn v-if=\"isAdmin\" @click=\"deleteItem(item.id)\">삭제</v-btn>\n            </template>\n          </v-data-table>\n          <v-pagination\n            v-model=\"currentPage\"\n            :length=\"totalPages\"\n            @input=\"fetchQuestions\"\n          ></v-pagination>\n        </v-col>\n      </v-row>\n    </v-container>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    data() {\n      return {\n        questions: [],\n        totalQuestions: 0,\n        loading: false,\n        headers: [\n          { text: '번호', value: 'id' },\n          { text: '제목', value: 'title' },\n          { text: '작성자', value: 'questionUserName' },\n          { text: '작성 시간', value: 'createdTime' },\n          { text: '답변', value: 'answerText' },\n          { text: '관리', value: 'actions', sortable: false }\n        ],\n        options: {\n          page: 1,\n          itemsPerPage: 10,\n          sortBy: ['createdTime'],\n          sortDesc: [true]\n        },\n        currentPage: 1,\n        totalPages: 1,\n        isAdmin: false,\n      };\n    },\n    created() {\n      this.checkAdminRole();\n      this.fetchQuestions();\n    },\n    methods: {\n      checkAdminRole() {\n        const role = localStorage.getItem('role');\n        this.isAdmin = role === 'ADMIN';\n      },\n      async fetchQuestions() {\n        try {\n          this.loading = true;\n          const response = await axios.get(`${process.env.VUE_APP_API_BASE_URL}/qna/list`, {\n            params: {\n              page: this.currentPage - 1,\n              size: this.options.itemsPerPage,\n              sort: `${this.options.sortBy[0]},${this.options.sortDesc[0] ? 'desc' : 'asc'}`\n            }\n          });\n          const data = response.data.data;\n          this.questions = data.content;\n          this.totalQuestions = data.totalElements;\n          this.totalPages = data.totalPages;\n        } catch (error) {\n          console.error('질문 목록을 불러오는 중 오류가 발생했습니다:', error);\n          alert('질문 목록을 불러오는 데 실패했습니다.');\n        } finally {\n          this.loading = false;\n        }\n      },\n      formatDate(date) {\n        const options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' };\n        return new Date(date).toLocaleDateString('ko-KR', options);\n      },\n      goToDetail(id) {\n        this.$router.push({ name: 'QnaDetail', params: { id } });\n      },\n      createNewQuestion() {\n        this.$router.push({ name: 'QnaCreate' });\n      },\n      updateItem(id) {\n        this.$router.push({ name: 'QnaUpdate', params: { id } });\n      },\n      async deleteItem(id) {\n        try {\n          const confirmed = confirm('이 질문을 삭제하시겠습니까?');\n          if (confirmed) {\n            await axios.delete(`${process.env.VUE_APP_API_BASE_URL}/qna/delete/${id}`);\n            alert('질문이 삭제되었습니다.');\n            this.fetchQuestions();\n          }\n        } catch (error) {\n          console.error('질문을 삭제하는 중 오류가 발생했습니다:', error);\n          alert('질문 삭제에 실패했습니다.');\n        }\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .clickable {\n    cursor: pointer;\n    color: blue;\n    text-decoration: underline;\n  }\n  \n  .create-button {\n    background-color: #007bff;\n    color: white;\n    margin-right: 10px;\n  }\n  .create-button:hover {\n    background-color: #0056b3;\n  }\n  </style>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}